(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0c83":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{imgSrc:"",meet_title:"",bleCloseNum:1,isPassWord:0,password:"",deviceId:"",timer:null,countNum:0}},onLoad:function(){var n=this;try{var t=e.getStorageSync("ble_key");t&&(n.deviceId=t,console.log(t," at pages\\index\\index.vue:70"))}catch(o){}setTimeout(function(){n.bleInit()},2500)},onShow:function(){var n=this;n.countNum=0,n.getIpconfig(),n.timer=setInterval(function(){n.countNum++,n.countNum>300&&e.navigateTo({url:"/pages/show/show"})},1e3)},onHide:function(){var e=this;clearInterval(e.timer)},methods:{getIpconfig:function(){var n=this;try{var t=e.getStorageSync("ip");t?(n.$store.state.requestUrl="http://"+t+"/exhibit",n.$store.state.sourceUrl="http://"+t+"/static/",n.$store.state.wsUrl="ws://"+t+":8002/"):e.showModal({title:"提示",content:"ip未设置请联系管理员",success:function(e){e.confirm?console.log("用户点击确定"," at pages\\index\\index.vue:114"):e.cancel&&console.log("用户点击取消"," at pages\\index\\index.vue:116")}})}catch(o){e.showModal({title:"提示",content:"ip未设置请联系管理员",success:function(e){e.confirm?console.log("用户点击确定"," at pages\\index\\index.vue:128"):e.cancel&&console.log("用户点击取消"," at pages\\index\\index.vue:130")}})}},loginClick:function(){var n=this,t="";try{var o=e.getStorageSync("ipad_pwd");o?(console.log(454," at pages\\index\\index.vue:142"),t=o):(console.log(666," at pages\\index\\index.vue:145"),t=n.$store.state.ipadPass)}catch(i){}console.log(n.password," at pages\\index\\index.vue:151"),n.password==t?(e.navigateTo({url:"/pages/setting/setting"}),this.isPassWord=0,n.password=""):e.showToast({title:"密码错误",icon:"loading",duration:2e3})},hideM:function(){this.isPassWord=0},hideModal:function(){var n=this;e.removeStorage({key:"ipad_pwd",success:function(t){e.showToast({title:"重置成功",icon:"success",duration:2e3}),n.password="",n.isPassWord=0},fail:function(){e.showToast({title:"重置失败",icon:"loading",duration:2e3}),n.password="",n.isPassWord=0}})},number:function(n){var t=this;switch(n){case 1:e.navigateTo({url:"/pages/login/login"});break;case 2:e.navigateTo({url:"/pages/inOutStore/inOutStore"});break;case 3:e.navigateTo({url:"/pages/login/login"});break;case 4:console.log("11"," at pages\\index\\index.vue:215"),t.isPassWord=1;break;case 5:e.request({url:t.$store.state.requestUrl+"/vote/help",data:{mac_machine_code:plus.device.uuid},method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(n){console.log(JSON.stringify(n)," at pages\\index\\index.vue:232"),0==n.data.code&&e.showToast({title:"请求已发送",duration:2e3})}});break;case 6:console.log(this.$store.state.isLogin," at pages\\index\\index.vue:246"),this.$store.state.isLogin?e.reLaunch({url:"/pages/number/number"}):e.navigateTo({url:"/pages/login/login"});break;default:}},bleInit:function(){var n=this;e.openBluetoothAdapter({success:function(){n.bleSearch()},fail:function(t){console.log("初始化蓝牙失败"," at pages\\index\\index.vue:271"),e.showModal({title:"提示",content:"初始化蓝牙失败,请确定蓝牙是否打开",success:function(e){e.confirm?(console.log("用户点击确定"," at pages\\index\\index.vue:277"),n.bleInit()):e.cancel&&console.log("用户点击取消"," at pages\\index\\index.vue:280")}})},complete:function(e){console.log(e," at pages\\index\\index.vue:286")}})},bleSearch:function(){var n=this;e.startBluetoothDevicesDiscovery({services:[],success:function(e){console.log("开始搜索蓝牙适配器"," at pages\\index\\index.vue:296"),n.bleFind()},fail:function(t){e.showModal({title:"提示",content:"搜索蓝牙失败,请重试",success:function(e){e.confirm?(console.log("用户点击确定"," at pages\\index\\index.vue:305"),n.bleSearch()):e.cancel&&console.log("用户点击取消"," at pages\\index\\index.vue:308")}})}})},bleFind:function(){var n=this;e.onBluetoothDeviceFound(function(e){console.log("新设备被找到"," at pages\\index\\index.vue:319");for(var t=0;t<e.devices.length;t++)n.deviceId==e.devices[t].deviceId&&(console.log("找到需要的设备"," at pages\\index\\index.vue:323"),setTimeout(function(){n.bleConnet()},1e3))})},bleFindStop:function(){e.stopBluetoothDevicesDiscovery({success:function(e){console.log("找到需要的蓝牙设备，停止搜索"," at pages\\index\\index.vue:339"),console.log(e," at pages\\index\\index.vue:340"),setTimeout(function(){},5e3)},fail:function(){e.showModal({title:"提示",content:"停止搜索蓝牙失败,请重试",success:function(e){e.confirm?(console.log("用户点击确定"," at pages\\index\\index.vue:353"),self.bleFindStop()):e.cancel&&console.log("用户点击取消"," at pages\\index\\index.vue:356")}})}})},bleConnet:function(){var n=this;e.createBLEConnection({deviceId:""+n.deviceId,success:function(e){console.log("链接成功",e," at pages\\index\\index.vue:370"),n.bleFindStop()},fail:function(){e.showModal({title:"提示",content:"链接蓝牙失败,请重试",success:function(e){e.confirm?(console.log("用户点击确定"," at pages\\index\\index.vue:379"),n.bleConnet()):e.cancel&&console.log("用户点击取消"," at pages\\index\\index.vue:382")}})}})},bleClose:function(){var n=this;e.onBLEConnectionStateChange(function(t){n.bleCloseNum++,n.bleCloseNum>4?e.showModal({title:"提示",content:"蓝牙重连失败，请联系管理员",success:function(e){e.confirm?(console.log("用户点击确定"," at pages\\index\\index.vue:401"),n.bleConnet()):e.cancel&&console.log("用户点击取消"," at pages\\index\\index.vue:404")}}):n.bleInit()})},bleSendMsg:function(){var n=new ArrayBuffer(5),t=new DataView(n);t.setUint8(0,82),t.setUint8(1,76),t.setUint8(2,50),t.setUint8(3,50),t.setUint8(4,50),console.log(ab2hex(t)," at pages\\index\\index.vue:422"),e.writeBLECharacteristicValue({deviceId:"18:93:D7:45:1E:69",serviceId:"0000ffe0-0000-1000-8000-00805f9b34fb",characteristicId:"0000ffe1-0000-1000-8000-00805f9b34fb",value:n,success:function(e){console.log("写入成功",e.errMsg," at pages\\index\\index.vue:434")},fail:function(e){console.log("写入失败",e," at pages\\index\\index.vue:437")},complete:function(e){console.log("写入完成",e," at pages\\index\\index.vue:440")}})}}};n.default=t}).call(this,t("6e42")["default"])},2934:function(e,n,t){"use strict";t.r(n);var o=t("b60f"),i=t("29a3");for(var s in i)"default"!==s&&function(e){t.d(n,e,function(){return i[e]})}(s);t("4ef3");var a=t("2877"),c=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);n["default"]=c.exports},"29a3":function(e,n,t){"use strict";t.r(n);var o=t("0c83"),i=t.n(o);for(var s in o)"default"!==s&&function(e){t.d(n,e,function(){return o[e]})}(s);n["default"]=i.a},"4ef3":function(e,n,t){"use strict";var o=t("bc44"),i=t.n(o);i.a},b60f:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement,o=(e._self._c,t("f259")),i=t("7e11"),s=t("e12d"),a=t("0d45"),c=t("6112"),l=t("8615");e.$mp.data=Object.assign({},{$root:{m0:o,m1:i,m2:s,m3:a,m4:c,m5:l}})},i=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i})},bc44:function(e,n,t){}},[["ce59","common/runtime","common/vendor"]]]);